\documentclass[fleqn,12pt]{article}

\usepackage[margin=15mm]{geometry}
\usepackage[utf8]{inputenc}
\usepackage[bulgarian]{babel}
\usepackage[unicode]{hyperref}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{enumitem, hyperref}

\usepackage{amsmath}
\usepackage{mathtools}
\usepackage{tikz}
\usepackage{tikz-qtree}

\DeclareMathOperator{\cotg}{cotg}
\DeclareMathOperator{\LCS}{LCS}
\DeclareMathOperator{\longer}{longer}

\setlength{\parskip}{1em}
\usetikzlibrary{automata,positioning}

\title{Контекстно-свободни граматики и езици. Стекови автомати.}
\author{v1.0}
\date{5 юни 2021}

\begin{document}

\maketitle

\tableofcontents
\pagebreak
\begin{flushleft}

\section{Контекстно-свободни граматики и езици}
\subsection{Дадености}

\textit{\textbf{Деф}} - Контекстно-свободна граматика (КСГ) наричаме четворката $G = (V, \Sigma, R, S)$, където $V$ е азбука, $\Sigma$ - множество на терминалите (осн. азбука), $\Sigma \subseteq V$, $V \backslash \Sigma$ - азбука на нетерминалите, $R \subseteq (V \backslash \Sigma) \times V^*$ - множество от правила, $S$ - нетерминал, наречен начален символ.

\textit{\textbf{Деф}} - Ако $(A, v) \in R$ ще го бележим $A \to_G v$, за $A \in V \backslash \Sigma, v \in V^*$ в КСГ $G=(V, \Sigma, R, S)$.

\textit{\textbf{Деф}} - Нека $G = (V, \Sigma, R, S)$ е КСГ. Казваме, че $u = xAy$ се преработва за във $v = xv'y$ с помощта на $G$, ако $\exists x, y \in V^*$ и $A \to_G v'$ е правило в $R$. Бележим като $u \Rightarrow_G v$.

\textit{\textbf{Деф}} - $\Rightarrow_G^*$ е рефлексивно и транзитивно затваряне на $\Rightarrow_G$.

\textit{\textbf{Деф}} - $L(G) = \{w | w \in \Sigma^*$ и $ S \Rightarrow_G^* w\}$ за КСГ $G = (V, \Sigma, R, S)$ наричаме език породен от $G$.

\textit{\textbf{Деф}} - Един език $L$ се нарича контекстно-свободен език (КСЕ) $\iff \exists$ КСГ $G$: $L(G) = L$.

\textit{\textbf{Деф}} - Нека $G = (V, \Sigma, R, S)$ е КСГ. Тогава ако $w_0 \Rightarrow_G w_1 \Rightarrow_G \dots \Rightarrow_G w_n$, то ще го наричаме извод с дължина $n$ на $w_n$ от $w_0$ в $G$.

\textit{\textbf{Твърдение}} - Всеки регулярен език е КСЕ. 

\textit{Примери:\\
\begin{enumerate}
    \item Нека $G = (V, \Sigma, R, S)$, $V \backslash \Sigma = \{S, P, N, A, V\}$, $\Sigma = \{a, b, c, d, e\}$, $R = \{P \to_G N, P \to_G AP, S \to_G PVP, V \to_G b, A \to_G d, A \to_G e, N \to_G a, N \to_G c\}$ $\implies$ $S \Rightarrow_G PVP \Rightarrow_G PbP \Rightarrow_G APbAP \Rightarrow_G dNbeN \Rightarrow_G dabec$.
    \item Нека $G = (V, \Sigma, R, S)$, $V = \{S\} \cup \Sigma$, $\Sigma = \{a, b\}$, $R = \{S \to_G aSb, S \to_G \varepsilon\}$ $\implies$ $s \Rightarrow_G aSb \Rightarrow_G a^2Sb^2 \Rightarrow_G a^2b^2$ $\implies$ $L(G) = \{a^nb^n | n \in \mathbb{N}\}$, т.е. не е регулярен.
    \item Нека $G = (V, \Sigma, R, s)$, $R = \{s \to_G ap, s \to_G bs, p \to_G aq, p \to_G bp, q \to_G as, q \to_G aq, q \to_G \varepsilon\}$, $\Sigma = \{a, b\}$, $V \backslash \Sigma = \{s, p, q\}$, като $L(G) = L(M)$, където M е автоматът от картинката.
\end{enumerate}
\begin{center}
\begin{tikzpicture}[shorten >=1pt,node distance=2cm,on grid,auto] 
    \node[state,initial] (s) {$s$}; 
    \node[state,accepting] (q) [below right=of s] {$q$}; 
    \node[state] (p) [above right=of q] {$p$}; 
    \path[->] 
    (s) edge[above] node{$a$} (p)
    (p) edge[below] node{$a$} (q)
    (q) edge[above] node{$a$} (s)
    (s) edge[loop above] node{$b$} (s)
    (p) edge[loop above] node{$b$} (p)
    (q) edge[loop left] node{$a$} (q);
\end{tikzpicture}
\end{center}
}

\subsection{Граматични дървета}

\textit{\textbf{Деф}} - Нека $G = (V, \Sigma, R, S)$ е КСГ. Граматично дърво $D$ с корен $A$ над $G$ дефинираме индуктивно по следния начин:
\begin{enumerate}
    \item Ако $A = a, a \in \Sigma$, то $D$ поражда $a$.
    \item Ако $\exists$ правило $A \to_G \varepsilon, A \in V \backslash \Sigma$, то $D$ поражда $\varepsilon$.
    \item Нека $D_1, D_2, \dots, D_n$ са граматични дървета с корени съответно $A_1, A_2, \dots, A_n \in V$, пораждащи съответно $y_1, y_2, \dots, y_n \in \Sigma^*, A \in V \backslash \Sigma$. Ако $\exists$ правило $A \to_G A_1A_2{\dots}A_n$ в $R$, то дървото $D$ поражда $y_1 \circ y_2 \circ \dots \circ y_n$.
\end{enumerate}

\begin{center}
\begin{tikzpicture}
    \Tree
    [.$A$     
        [.$A_1$ \edge[roof]; {$y_1$} ]
        [.$A_2$ \edge[roof]; {$y_2$} ]
        [.$\dots$ ]
        [.$A_n$ \edge[roof]; {$y_n$} ]
    ]
\end{tikzpicture}
\end{center}

\textit{Пример:\\
Нека $G = (V, \Sigma, R, S)$, $\Sigma = \{(, )\}$, $V = {S} \cup \Sigma$, $R = \{S \to_G SS, S \to_G (S), S \to_G \varepsilon\}$. \\
$D_1$ : $S \Rightarrow_G SS \Rightarrow_G (S)S \Rightarrow_G ((S))S \Rightarrow_G (())S \Rightarrow_G (())(S) \Rightarrow_G (())()$ \\
$D_2$ : $S \Rightarrow_G SS \Rightarrow_G S(S) \Rightarrow_G S() \Rightarrow_G (S)() \Rightarrow_G ((S))() \Rightarrow_G (())()$.
}

\begin{center}
\begin{tikzpicture}
    \Tree
    [.$S$
        [.$S$ 
            [.$($ ] 
            [.$S$ 
                [.$S$ 
                    [.$($ ]
                    [.$S$ 
                        [.$\varepsilon$ ] ]
                    [.$)$ ] ] ]
            [.$)$ ] ]
        [.$S$ 
            [.$S$
                [.$($ ]
                [.$S$
                    [.$\varepsilon$ ] ]
                [.$)$ ] ] ] ]
\end{tikzpicture}
\end{center}

\textit{Явно е, че чрез граматични дървета се представят конкретни пораждания на думи чрез КСГ $G$. Също така шом за една дума могат да съществуват повече от 1 пораждания чрез $G$, то могат да съществуват повече от 1 граматични дървета за нея. В случая примера е смотан и не показва това, но например в английския език може да имаме следното нещо.}

\begin{center}
\begin{tikzpicture}
    \Tree
    [.<sentence> 
        [.<noun-phrase>
            [.<det>
                [.the ]
            [.<noun> 
                [.girl ] ] ] ]
        [.<verb-phrase>
            [.<verb>
                [.touched ] ]
            [.<noun-phrase>
                [.<det>
                    [.the ] ]
                [.<noun>
                    [.cat ] ] ]
            [.<prep-phrase>
                [.<prep>
                    [.with ] ]
                [.<noun-phrase>
                    [.<det>
                        [.a ] ]
                    [.<noun> 
                        [.feather ] ] ] ] ] ]
\end{tikzpicture}
\end{center}

\begin{center}
\begin{tikzpicture}
    \Tree
    [.<sentence> 
        [.<noun-phrase>
            [.<det>
                [.the ]
            [.<noun> 
                [.girl ] ] ] ]
        [.<verb-phrase>
            [.<verb> 
                [.touched ] ]
            [.<noun-phrase> 
                [.<det>
                    [.the ] ]
                [.<noun>
                    [.cat ] ]
                [.<prep-phrase>
                    [.<prep>
                        [.with ] ]
                    [.<noun-phrase>
                        [.<det>
                            [.a ] ]
                        [.<noun>
                            [.feather ] ] ] ] ] ] ]
\end{tikzpicture}
\end{center}

\textit{\textbf{Деф}} - Нека $G = (V, \Sigma, R, S)$ е КСГ и дърветата $D$ и $D'$ са такива, че:
\begin{itemize}
    \item $D$: $x_1 \Rightarrow_G x_2 \Rightarrow_G \dots \Rightarrow_G x_n$
    \item $D'$: $x'_1 \Rightarrow_G x'_2 \Rightarrow_G \dots \Rightarrow_G x'_n$
\end{itemize}
и $x_1, x'_1 \in V \backslash \Sigma$, $x_n, x'_n \in \Sigma^*$. Казваме, че $D$ предхожда $D' \iff$ $\exists k: 1 < k < n$:
\begin{enumerate}
    \item $x_i = x'_i$, за $i \neq k$,
    \item $x_{k-1} = x'_{k-1} = uAvBw$,
    \item $x_k = uyvBw, A \to_G y \in R$,
    \item $x'_k = uAvzw, B \to_G z \in R$,
    \item $x_{k+1} = x'_{k+1} = uyvzw$,
\end{enumerate}
където $A, B \in V \backslash \Sigma$ и $u, y, v, z, w \in V^*$. \\
Означаваме с $D \prec D'$, като $(D, D')$ наричаме предшестване.

\textit{Пример:\\
\begin{itemize}
    \item $D_1$: $S \Rightarrow_G SS \Rightarrow_G (S)S \Rightarrow_G ((S))S \Rightarrow_G (())S \Rightarrow_G (())(S) \Rightarrow_G (())()$,
    \item $D_2$: $S \Rightarrow_G SS \Rightarrow_G (S)S \Rightarrow_G ((S))S \Rightarrow_G ((S))(S) \Rightarrow_G (())(S) \Rightarrow_G (())()$,
    \item $D_3$: $S \Rightarrow_G SS \Rightarrow_G S(S) \Rightarrow_G S() \Rightarrow_G (S)() \Rightarrow_G ((S))() \Rightarrow_G (())()$,
    \item $D_4$: $S \Rightarrow_G SS \Rightarrow_G (S)S \Rightarrow_G (S)(S) \Rightarrow_G ((S))(S) \Rightarrow_G (())(S) \Rightarrow_G (())()$.
\end{itemize}
$\implies D_1 \prec D_2 \prec D_4$, като $D_3$ не предхожда и не е предхождано от нито едно от другите пораждания.
}

\textit{\textbf{Деф}} - Нека $G = (V, \Sigma, R, S)$ е КСГ. Тогава чрез:
\begin{itemize}
    \item $S \xRightarrow[]{L}_G^* w$ ще означаваме пораждането с най-голям приоритет отляво,
    \item $S \xRightarrow[]{R}_G^* w$ ще означаваме пораждането с най-голям приоритет отдясно,
\end{itemize} 
където $w \in \Sigma^*$.

\textit{\textbf{Деф}} - Казваме, че граматичните дървета $D$ и $D'$ са подобни $\iff$ $(D, D')$ принадлежи на рефлексивното, симетрично и транзитивно затваряне на $\prec$.

\textit{\textbf{Твърдение}} - Нека $G = (V, \Sigma, R, S)$ е КСГ. Тогава следните твърдения са еквивалентни:
\begin{enumerate}
    \item $S \Rightarrow_G^* w$,
    \item $\exists$ граматично дърво с корен $A$, пораждащо $w$,
    \item $A \xRightarrow[]{L}_G^* w$,
    \item $A \xRightarrow[]{R}_G^* w$,
\end{enumerate}
където $A \in V \backslash \Sigma, w \in \Sigma^*$.

\subsection{Нормална форма на Чомски}

\textit{\textbf{Деф}} - Нека $G = (V, \Sigma, R, S)$ е КСГ. Казваме, че $G$ е в нормална форма на Чомски $\iff$ $R \subseteq (V \backslash \Sigma) \times V^2$, т.е. всяко правило е от вида $A \to_G B_1B_2$, където $A \in V \backslash \Sigma$, а $B_1, B_2 \in V$.

\textit{\textbf{Твърдение}} - Нека $G$ е произволна КСГ. Тогава $\exists$ КСГ в нормална форма на Чомски $G'$, такава че $L(G') = L(G) \backslash (\Sigma \cup \{\varepsilon\})$.


\end{flushleft}
\end{document}
